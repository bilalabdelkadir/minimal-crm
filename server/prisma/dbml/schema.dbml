//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table users {
  id String [pk]
  email String [unique, not null]
  firstName String [not null]
  lastName String
  password String [not null]
  phoneNumber String [unique]
  isPhoneVerified Boolean [not null, default: false]
  isEmailVerified Boolean [not null, default: false]
  isMultiFactorAuthEnabled Boolean [not null, default: false]
  profilePicture images
  profilePictureId String
  refreshToken String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  deletedAt DateTime
  associatedWorkspaces workspaces [not null]
  otp otps [not null]
  ownedWorkspaces workspaces [not null]
  createdWorkdpaces workspaces [not null]
  defaultWorkspace workspaces
  defaultWorkspaceId String
}

Table roles {
  id String [pk]
  roleName String [not null]
  description String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  deletedAt DateTime
  workspaceId String [not null]
  permissions permissions [not null]

  indexes {
    (roleName, workspaceId) [unique]
  }
}

Table permissions {
  id String [pk]
  moduleName String [not null]
  actions PermissionActions[] [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  deletedAt DateTime
  role roles [not null]
  roleId String [not null]
  workspaceId String [not null]

  indexes {
    (moduleName, roleId) [unique]
  }
}

Table otps {
  id String [pk]
  otp Int [not null]
  email String
  phoneNumber String
  createdAt DateTime [default: `now()`, not null]
  expiredAt DateTime [not null]
  user users
  userId String [unique]
  sentOver OtpSentTo [not null]
  verifiedAt DateTime

  indexes {
    (otp, userId) [unique]
  }
}

Table workspaces {
  id String [pk]
  name String [not null]
  description String
  logo images
  logoId String
  website String
  country String
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [default: `now()`, not null]
  deletedAt DateTime
  users users [not null]
  createdBy users [not null]
  createdById String [not null]
  ownedBy users [not null]
  ownedById String [not null]
  defaultWorkspace users [not null]
}

Table images {
  id String [pk]
  url String [not null]
  publicId String [not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  Workspace workspaces [not null]
  User users [not null]
}

Table associatedWorkspaces {
  associatedworkspacesId String [ref: > workspaces.id]
  usersId String [ref: > users.id]
}

Enum PermissionActions {
  CREATE
  READ
  UPDATE
  DELETE
  PRINT
  EXPORT
  IMPORT
  MANAGE
  APPROVE
  REJECT
  DOWNLOAD
}

Enum OtpSentTo {
  EMAIL
  PHONE
}

Ref: users.profilePictureId > images.id

Ref: users.defaultWorkspaceId > workspaces.id

Ref: permissions.roleId > roles.id

Ref: otps.userId > users.id

Ref: workspaces.logoId > images.id

Ref: workspaces.createdById > users.id

Ref: workspaces.ownedById > users.id